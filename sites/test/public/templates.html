<!--
Copyright (c) 2020 Oracle and/or its affiliates. All rights reserved.
Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.
-->
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type="text/javascript" src="../sitescloud/renderer/app/apps/js/jquery.min.js"></script>
    <script type="text/javascript" src="../sitescloud/renderer/app/apps/js/knockout.min.js"></script>
    <link href="css/styles.css" rel="stylesheet">
</head>

<body>
    <div class="branding">
        <div class="brand">
            <div class="nav">
                <!-- <button type="button" id="nav-btn" class="menu secondary short osn-clickable" aria-label="Navigation menu" title="Navigation menu"> <span class="icon"></span> </button> -->
            </div><a href="/public"><img id="logo" data-bind="click: mainPage" class="brand-logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAARCAMAAAAxDRTrAAAApVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABU/knhAAAANnRSTlMAzCJq/RDdtKWH+ebvBp9xUdGYd2YbA/JZPjct4djISyUT9urCvZKDMY1DCwKqfl5GGLhjHa4JOWDOAAACmElEQVRIx4WV2XqCMBBGg+JSkEWoiCLiDnW3y//+j9YBIkmT+nFuJBMNZ5LJyEqc2F0aDfvAj6qwb8gsf+Izk7huF748PmfB3hD4LDeMLtNY5QPpXQGb5Ncj42QLKKQzRnShsHyIBX0Am5UYF2PIjB02BN5UjZ5rQcIqWDc8PHU9ExpW/J8IjKhZ0QaxZ00yFmTMOftPZJLiDx/0Ei/0eGrkMXqbrTqc1fGwIZN5JbLvNMw/TOCLcQ7AlMY3PkzKnwT3ZpFv9p+IYwDYxUmzpkNuoTerJk82MJ4o59in2LkUGcjhg9iCOUl0XWC7rsc7wE6U9HWREDA99oIuMJqowcQCMk1kBvTrp8gAluf1CAj4THkYbSKRXR7GKz6BXI+6gKuJZEDKywowiyoJc8b36oe1ipDupvdShCznetQHDFXE2QPD6ul7Chz4xqQOPdDMrV3kHbD6f/iMxKwJfOsic2BRixTvnOsYQF1XP4Dde5ZKSJ80dWwXCaFgyj/aAokukgHjWsS5QOA2LSRmFQGw6VS1GreK6O3AlWdpDU8X+QAu/GjOB3Cs/FzdswXwyb+33tJz5eO2i9yB6aMn4Sj7ZWsVNJkCt6ZGQhMw3fx90khuVoNRjVXtjk+Wq1aR01QkrbOm2cFJiS2BhSOK9WbR+HmABWldqwvOoUSiVGlGughPwcrkgHZyabwWgcfXAjB9JkTYnWxHVFnSTXmDIGB3k3y6kxaRXrlwUEQvTALoUM6yCCtswPp6eh+VRKiZeXohDqHQPyVbyKhV4U2hsOXvFH2kk4ISrKtnyGSicfVf69uQod7vQuFOHWgHCe2uPfKlWMa0dyF5ChFRN7iUl3n0YH+Y1c3k5O1sE5yyvyV9yHD/7NLfgCP3y1/ilaUbUwNDfAAAAABJRU5ErkJggg==" alt="undefined logo"><span id="brandText">Content and Experience</span></a></div>
        <div class="clear"></div>
    </div>
    <div class="banner">
        <div>
            <!-- <img id="logo" data-bind="click: mainPage" src="images/CECS_w_72.png" /> -->
            <div id="title" class="text-ellip">Templates</div>
        </div>
    </div>
    <!-- breadcrumb -->
    <div class="breadcrumb">
		<div><a href="/public">Developer</a>&nbsp;&gt;&nbsp;Templates</div>
		
		<div class="breadcrumb-right">
			<select id="layouts" name="layouts" data-bind="options: layouts, optionsText: 'label', value: selectedLayout">
			</select>
		</div>
	</div>
	<!-- ko if: isGrid() === true -->
    <div class="container cellView" data-bind="foreach: templates">
        <!-- <div class="block" data-bind="text : name, click: $parent.render"></div> -->
        <li id="F09196FC5061551AD0577852C2DB3E7D25FC0D5B9AF4" tabindex="-1" class="containerview-item siterow skipTarget">
            <div class="containerview-row-content" data-bind="attr: {title: name}, click: $parent.render" aria-label="Template BasicTemplate Basic Template Created yesterday at 7:52 PM by you" role="group">
                <div class="thumbSpacer">
                    <div class="thumbContainer">
                        <div class="thumbWrapper containerview-openClick ">
                            <div class="containerview-iconx containerview-icon-file-bkg"> 
								<img data-bind="attr: {src: '/gettemplateicon/'+name}" alt="" style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; width: 100%;"> 
							</div>
                        </div>
                    </div>
                </div>
                <div class="containerview-block containerview-content-area">
                    <div class="containerview-block containerview-info-area">
                        <div class="containerview-name" data-bind="text: name">aaa<a href="#" class="block" title="AnchorButtons" aria-label="AnchorButtons" data-bind="text : name, attr: {title: name}" class="text_button containerview-openClick"></a>xxx </div>

						<div class="containerview-status">&nbsp;</div>
						
						<div class="containerview-card-capsule-text" data-bind="text: type"></div>
                    </div>
                </div>
            </div>
        </li>
	</div>
	<!-- /ko -->
	<!-- ko if: isGrid() === false -->
	<div class="rowView" id="listContainer" data-bind="foreach: templates">
		<li id="FC6C25C17FAB33A07FE86ABC5CBD7843730FAB23A1D5" aria-describedby="contextMenuHelp" tabindex="0">
			<div class="containerview-row-content"> 
			<span class="containerview-temp-thumbnail">
				<span class="thumbWrapper">  
					<div class="containerview-temp-iconx containerview-icon-file-bkg"> 
						<img data-bind="attr: {src: '/gettemplateicon/'+name}" alt="" >
					</div>
				</span>
			</span> 
			<span class="containerview-content-area">     
				<span class="containerview-textarea1">    
					<div class="containerview-name" data-bind="text: name, click: $parent.render">
						<a href="#" class="block" title="AnchorButtons" aria-label="AnchorButtons" data-bind="text : name, click: $parent.render"
					   		class="text_button">AnchorButtons</a>
					</div>
				</span> 
				<span class="containerview-textarea2">        
					<span class="containerview-capsule-text" data-bind="text: type"></span> 
				</span> 
			</span> 
			
	        </div>
		</li>
	</div>
	<!-- /ko -->
    <script type="text/javascript">
    /* global ko, console */
    var getTemplates = function(self) {
        var temps = self.templates;
        $.getJSON("/gettemplates", function(data) {
			temps(data);
			console.log(data);
        });
    };
    var IndexViewModel = function() {
        "use strict";

		var self = this;
		
		self.layouts = ko.observableArray([{
            	value: 'grid',
        		label: 'Grid view'
			},
			{
                value: 'list',
                label: 'List view'
			}
		]);
		var layoutValue = window.sessionStorage['templatesLayout'] || 'grid';
		var selectedValue = layoutValue === 'grid' ? self.layouts()[0] : self.layouts()[1];
		self.selectedLayout = ko.observable(selectedValue);
		self.isGrid = ko.observable(layoutValue === 'grid');

        self.templates = ko.observableArray([]);

        getTemplates(self);

        self.render = function(data) {
            console.log('render template ' + data.name);
            window.open('/templates/' + data.name, '_blank');
        };
        self.templatesPage = function(data) {
            window.location = '/public/templates';
        };
        self.mainPage = function() {
            window.location = '/';
		}
		
		self.selectedLayout.subscribe(function (newValue) {
			self.isGrid(newValue.value === 'grid');
			window.sessionStorage.setItem('templatesLayout', self.selectedLayout().value);
		});
    };
    ko.applyBindings(new IndexViewModel());
    </script>
</body>

</html>
