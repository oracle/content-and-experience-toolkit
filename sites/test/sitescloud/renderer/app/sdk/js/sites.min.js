var _core = function() {"use strict";var e, t, r, i, o, s, n, a, g = {component:["update", "notify", "refresh", "appUpdate"], app:["notifyError", "hostrequest"], appSettings:["messageResponse"]}, c = (t = "error", r = "warn", i = "info", o = {level:(e = {LEVEL_NONE:0, LEVEL_ERROR:1, LEVEL_WARN:2, LEVEL_INFO:3, LEVEL_LOG:4}).LEVEL_ERROR, writer:null}, s = function(e, t) {var r, i = {};if (0 === arguments.length) {for (r in o)o.hasOwnProperty(r) && (i[r] = o[r]);return i} if ("string" == typeof e && void 0 === t) return void 0 === o[e] ? null : o[e];if ("string" == typeof e)o[e] = t;else {var n = e;for (r in n)n.hasOwnProperty(r) && s(r, n[r])}}, n = function(e, t, r) {if (!(s("level") < e)) {var i = a();if (null !== i) {if (1 === r.length && r[0] instanceof Function) {var o = r[0]();r = [o]}i[t] && i[t].apply ? i[t].apply(i, r) : i[t] && (i[t] = Function.prototype.bind.call(i[t], i), n(e, t, r))}}}, a = function() {var e = null;return s("writer") ? e = s("writer") : void 0 !== window && void 0 !== window.console && (e = window.console), e}, {LOG_LEVELS:e, setLogLevel:function(t) {s("level", e[t] || e.LEVEL_LOG)}, debug:function(t) {n(e.LEVEL_LOG, "log", arguments)}, info:function(t) {n(e.LEVEL_INFO, i, arguments)}, warn:function(t) {n(e.LEVEL_WARN, r, arguments)}, error:function(r) {n(e.LEVEL_ERROR, t, arguments)}});var p, l, S, d = function() {return window.top !== window ? window.top : window || window.self}, u = function() {var e = {}, t = {};function r(e, t) {var r = g[e], i = {};if (r) for (var o = function(r) {i[r] = function(i) {try {!function(e) {if (!e) throw new Error("unable to post message: no args provided");var t = e.target, r = e.service, i = e.method, o = e.parameters;if (!t) throw new Error("unable to post message: target is undefined");var s = {destination:r, method:i, parameters:o};if (!t.postMessage || "function" != typeof t.postMessage) throw new Error("Unsupported Browser [" + window.navigator.userAgent + "] unable to post message: target does not support postMessage.");t.postMessage(s, "*")}({service:e, method:r, parameters:i, target:t})} catch (e) {console.error("sendMessage %s ", e.message)}}}, s = 0;s < r.length;s++)o(r[s]);return i} function i(e) {!function(e) {var r = e.data;if (!r) return;if ("string" == typeof r) try {r = JSON.parse(r)} catch (e) {} if ("string" != typeof r.destination || "string" != typeof r.method) return;var i = r.destination, o = r.method, s = r.parameters || {}, n = i ? t[i] : void 0;n && o && "function" == typeof n[o] && n[o].call(n, s, e)}(e)} return {getProxy:function(t, i) {if (!t) throw new Error("unable to get proxy: no name specified");var o = e[t];return o || (o = r(t, i)), o}, handleMessage:i, registerHandler:function(e, r) {if (e) if ("object" == typeof t[e]) for (var i in r)r.hasOwnProperty(i) && (t[e][i] = r[i]);else t[e] = r}, startListening:function() {window.addEventListener("message", i)}}}(), f = (p = {}, S = {_execute:function(e, t, r) {var i = {}, o = "", s = t.detail.targetOrigin;i.id = t.detail.source, i.action = t.detail.message.action || "", i.messageid = Math.random(), e === SitesSDK.MESSAGE_TYPES.GET_ACTIONS ? (i.data = r || [], o = "appActions" + t.detail.source) : e === SitesSDK.MESSAGE_TYPES.GET_APP_TRIGGERS ? (i.data = r || [], o = "appTriggers") : e === SitesSDK.MESSAGE_TYPES.COPY_CUSTOM_DATA ? (i.data = r || [], o = "appCopyStyle") : e === SitesSDK.MESSAGE_TYPES.PASTE_CUSTOM_DATA ? (i.data = r || [], o = "appPasteStyle") : (i.data = {}, o = "appProcessingErrors" + t.detail.source), s.source.postMessage({destination:o, method:"responseData", parameters:i}, s.origin)}, COPY_CUSTOM_DATA:function(e, t) {this._execute(SitesSDK.MESSAGE_TYPES.COPY_CUSTOM_DATA, e, t)}, PASTE_CUSTOM_DATA:function(e, t) {this._execute(SitesSDK.MESSAGE_TYPES.PASTE_CUSTOM_DATA, e, t)}, GET_ACTIONS:function(e, t) {this._execute(SitesSDK.MESSAGE_TYPES.GET_ACTIONS, e, t)}, GET_TRIGGERS:function(e, t) {this._execute(SitesSDK.MESSAGE_TYPES.GET_APP_TRIGGERS, e, t)}}, (l = {}).addMessageListener = function(e, t) {p[e] = t ? {callback:t} : void 0}, l.execute = function(e) {var t, r = p[e.type];if (r && "function" == typeof r.callback) {t = {detail:{source:e.id || "", message:e.data, time:new Date, targetOrigin:e.targetOrigin}};var i = r.callback.call(null, t);i && "function" == typeof S[e.type] && S[e.type](t, i)}}, l);return {isNumeric:function(e) {return !isNaN(parseFloat(e)) && isFinite(e)}, getQueryParameters:function(e) {var t = {};return e ? t = function(e) {var t, r = document.createElement("a"), i = {};r.href = e, t = r.search.replace(/^\?/, "").split("&");for (var o = 0;o < t.length;o++) {var s = t[o].split("=");i[s[0]] = decodeURIComponent(s[1])} return {protocol:r.protocol, host:r.host, hostname:r.hostname, port:r.port, pathname:r.pathname, search:r.search, parameters:i, hash:r.hash}}(e).parameters : t}, getTopWindow:d, postBox:u, notifySDKError:function(e) {var t = new TypeError("SDK Error: " + e);throw c.error(e), t.stack}, base64Decode:function(e) {return e ? (window.atob ? t = window.atob : d().atob && (t = d().atob), "function" == typeof t ? t(e) : e) : e;var t}, getParentOrTopWindow:function() {return window.top !== window ? window.parent : window.top || window.self}, generateUUID:function() {var e = (new Date).getTime();return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(t) {var r = (e + 16 * Math.random()) % 16 | 0;return e = Math.floor(e / 16), ("x" === t ? r : 3 & r | 8).toString(16)}))}, servicesRegistry:f, Logger:c, getNotice:function(e, t) {return "SDK: \x3c!--API--\x3e is deprecated. Please use \x3c!--NEWAPI--\x3e instead.".replace("\x3c!--API--\x3e", e).replace("\x3c!--NEWAPI--\x3e", t)}}}(), SitesSDK = function(e) {"use strict";var t = {}, r = "widget", i = "settings";function o() {return e.Logger}e.Logger.setLogLevel(e.Logger.LOG_LEVELS.LEVEL_WARN);function s() {var t = e.getQueryParameters(location.href), r = t && t.hasOwnProperty("id") && t.id;if (!r) {var i = window.frameElement;r = i && i.getAttribute("id")} return !1 === /^settings/.test(r) && (r = r.replace(/(?:(^\S*iframe-))(\S+$)/, "$2")), r} function n() {var e = s();return !0 === /^settings/.test(e) ? "settings" : "widget"} function a() {var t = n();return t ? !0 === /^settings/.test(t) ? e.getTopWindow() : e.getParentOrTopWindow() : window.self || window} function g() {var e = n();return !0 === /^settings/.test(e) ? i : r} var c = {customSettingsData:{name:"customSettingsData", settings:{set:{allowed:!0}, get:{allowed:!0}}, widget:{set:{allowed:!0}, get:{allowed:!0}}}, height:{name:"height", settings:{set:{allowed:!1}, get:{allowed:!1}}, widget:{set:{allowed:!0}, get:{allowed:!0}}}, width:{name:"width", settings:{set:{allowed:!1}, get:{allowed:!1}}, widget:{set:{allowed:!0}, get:{allowed:!0}}}, compSettingsId:{name:"compSettingsId", settings:{set:{allowed:!1}, get:{allowed:!0}}, widget:{set:{allowed:!1}, get:{allowed:!0}}}, origCompSettingsId:{name:"origCompSettingsId", settings:{set:{allowed:!1}, get:{allowed:!0}}, widget:{set:{allowed:!1}, get:{allowed:!1}}}, instanceId:{name:"instanceId", settings:{set:{allowed:!1}, get:{allowed:!0}}, widget:{set:{allowed:!1}, get:{allowed:!0}}}, permissions:{name:"permissions", settings:{set:{allowed:!1}, get:{allowed:!0}}, widget:{set:{allowed:!1}, get:{allowed:!0}}}, signDate:{name:"signDate", settings:{set:{allowed:!1}, get:{allowed:!0}}, widget:{set:{allowed:!1}, get:{allowed:!0}}}}, p = function() {};p.prototype = {callbacks:{}, receiveMessage:function(t) {e.postBox.registerHandler(t, {hostresponse:function(e) {var t = e || {};if (t.hasOwnProperty("action") && t.hasOwnProperty("data")) {var r = t.name || "", i = t.action || "", o = p.prototype.callbacks[i];if (o) for (var s = 0;s < o.length;s++) if (o[s].resource === r && "function" == typeof o[s].handler) {var n = o[s].handler, a = o[s].context;n.call(a || null, t.data || {}), o.splice(s, 1);break}}}})}, registerResponseCallback:function(e, t, r) {e ? (void 0 === p.prototype.callbacks[e] && (p.prototype.callbacks[e] = []), p.prototype.callbacks[e].push({resource:t, handler:r, context:void 0})) : p.prototype.callbacks[e] = void 0}, dispatchMessage:function(t, r, i) {var o = a(), s = e.postBox.getProxy(t, o), n = "$message", c = "scsRequest$message" + r;i.hasOwnProperty("requestid") || (i.requestid = e.generateUUID()), i.location = g(), s.hostrequest({id:c, field:n, value:i})}, customSettingsData:{setProperty:function(t, r) {if (r && "object" == typeof r) {var i, o = {};try {"string" == typeof r ? i = JSON.parse(r) : "object" == typeof r && (i = JSON.parse(JSON.stringify(r))), o.action = "setProperty", o.actionArgs = {name:c.customSettingsData.name, payload:i}, p.prototype.dispatchMessage("app", t, o)} catch (t) {e.notifySDKError("sdk: Error Unable to save custom settings data " + JSON.stringify(t))}}}, getProperty:function(t, r) {var i = {}, o = e.generateUUID();try {p.prototype.registerResponseCallback("getProperty", "customSettingsData", r), i.action = "getProperty", i.actionArgs = {name:c.customSettingsData.name}, i.requestid = o, p.prototype.dispatchMessage("app", t, i)} catch (t) {e.notifySDKError("sdk: Error SitesSDK.getProperty() : Unable to send host request" + JSON.stringify(t))}}}, height:{setProperty:function(e, t) {var r, i = {};if (t && "object" == typeof t)o().error("sdk: Error parameter height cannot be an object. Valid values are string,number or function");else try {t ? r = "function" == typeof t ? t() : t || "" : ((r = {}).bodyOffsetHeight = window.document.body.offsetHeight + SitesSDK.Utils.getStyle(window.document.body, "marginTop") + SitesSDK.Utils.getStyle(window.document.body, "marginBottom"), r.bodyScrollHeight = 0, r.bodyClientHeight = 0), r && (i.action = "setProperty", i.actionArgs = {name:c.height.name, payload:r}, p.prototype.dispatchMessage("app", e, i))} catch (e) {o().warn("sdk: setProperty(height) Unable to set height of the iframe " + e.message || "")}}}, width:{setProperty:function(e, t) {if (t && "" !== t) {var r = {};try {r.action = "setProperty", r.actionArgs = {name:c.width.name, payload:t}, p.prototype.dispatchMessage("app", e, r)} catch (e) {o().warn("sdk: setProperty(width) Unable to set width of the iframe " + e.message || "")}} else o().warn("sdk: setProperty(width) Property 'width' needs to have a value")}}, extension:{filePicker:function() {for (var t, r = {}, i = {}, o = s(), n = e.generateUUID(), a = "scsFilePicker", g = 0;g < arguments.length;g++)"function" == typeof arguments[g] ? t = arguments[g] : r = arguments[g];try {p.prototype.registerResponseCallback("getProperty", a, t), i.action = "getProperty", i.actionArgs = {name:a, options:r}, i.requestid = n, p.prototype.dispatchMessage("app", o, i)} catch (t) {e.notifySDKError("sdk: filePicker() Error Unable to get files with options " + JSON.stringify(r) + " Error " + t.message || "")}}, filePickerV2:function() {for (var t, r = {}, i = {}, o = s(), n = e.generateUUID(), a = "scsFilePickerV2", g = 0;g < arguments.length;g++)"function" == typeof arguments[g] ? t = arguments[g] : r = arguments[g];try {p.prototype.registerResponseCallback("getProperty", a, t), i.action = "getProperty", i.actionArgs = {name:a, options:r}, i.requestid = n, p.prototype.dispatchMessage("app", o, i)} catch (t) {e.notifySDKError("sdk: filePickerV2() Error Unable to get files with options " + JSON.stringify(r) + " Error " + t.message || "")}}, getProperty:function(t, r) {var i = {}, o = s(), n = e.generateUUID();try {p.prototype.registerResponseCallback("getProperty", t, r), i.action = "getProperty", i.actionArgs = {name:t}, i.requestid = n, p.prototype.dispatchMessage("app", o, i)} catch (r) {e.notifySDKError("sdk: getProperty() Error Unable to get property " + t + " Error " + r.message || "")}}, setProperty:function(t, r) {var i = r || "", o = {}, n = s(), a = e.generateUUID();try {o.action = "setProperty", o.actionArgs = {name:t, payload:i}, o.requestid = a, p.prototype.dispatchMessage("app", n, o)} catch (r) {e.notifySDKError("sdk: setProperty() Error Unable to save property " + t + " Error " + r.message || "")}}}};var l = l || new p;function S(e, t) {if (!e || "string" != typeof e) return "";if (e && "" === e) return "";if (t && "function" == typeof t) if (c.hasOwnProperty(e)) {var r = g();!0 === c[e][r].get.allowed ? l[e] && "function" == typeof l[e].getProperty ? l[e].getProperty(s(), t) : l.extension.getProperty(e, t) : (o().warn("sdk: Property [" + e + "] cannot be fetched from [" + r + "] with getProperty() call."), t(void 0))} else l.extension.getProperty(e, t);else o().error("sdk: getProperty() callback is required for property " + e)} return l.receiveMessage("app"), t.MESSAGE_TYPES = {SETTINGS_UPDATED:"SETTINGS_UPDATED", TRIGGER_ACTIONS:"TRIGGER_ACTIONS", COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA", PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA", EXECUTE_ACTION:"EXECUTE_ACTION", GET_ACTIONS:"GET_ACTIONS", GET_TRIGGERS:"GET_TRIGGERS"}, t.publish = function(t, r) {if (t && "string" == typeof t) if (r && "object" == typeof r) {var i = r || {}, o = t, n = a(), c = "$message", p = "scsRequest$message" + s(), l = {};try {l.action = "executeMessageCmd", l.actionArgs = {name:o, payload:i}, l.requestid = e.generateUUID(), l.location = g(), e.postBox.getProxy("app", n).hostrequest({id:p, field:c, value:l})} catch (t) {e.notifySDKError("sdk: Error Unable to send message " + o + " with payload " + JSON.stringify(i))}} else e.Logger.warn("Parameter 'payload' is required");else e.Logger.warn("Parameter 'messageType' is required")}, t.subscribe = function(t, r) {e.servicesRegistry.addMessageListener(t, r)}, t.setProperty = function(t, r) {if (t && "string" == typeof t && "" !== t) if (t && c.hasOwnProperty(t)) {var i = g();if (!1 === c[t][i].set.allowed) return void e.notifySDKError("sdk: Setting of property [" + t + "] is not allowed from " + i);l[t].setProperty(s(), r)} else l.extension.setProperty(t, r)}, t.getProperty = S, t.setProperties = function(e) {l.extension.setProperty("properties", e)}, t.getProperties = function(e, t) {var r = JSON.stringify(e || []);l.extension.getProperty(r, t)}, t.filePicker = l.extension.filePicker, t.filePickerV2 = l.extension.filePickerV2, t.getSiteProperty = function(e, t) {S(e, t)}, e.postBox.registerHandler("app", {notify:function(e, t) {if (!e.type && null === e.type) throw new Error("A valid event type is required to propagate the event");var r = e.data || {}, i = new CustomEvent(e.type, {detail:{source:e.id || "", message:r, time:new Date, targetOrigin:t}, bubbles:!0, cancelable:!0});window.document.dispatchEvent(i)}, execute:function(t, r) {if (console.log("sdk: MESSAGE EXECUTION HANDLER - Message %s ", JSON.stringify(t)), !t.type && null === t.type) throw new Error("A valid message type is required.");t.targetOrigin = r, e.servicesRegistry.execute(t)}}), e.postBox.startListening(), t}(_core);SitesSDK.Utils = function(e) {"use strict";var t = {};return t.getStyle = function(e, t) {var r, i = (e.ownerDocument || document).defaultView;return i && i.getComputedStyle ? (t = t.replace(/([A-Z])/g, "-$1").toLowerCase(), r = null !== i.getComputedStyle(e, null).getPropertyValue(t) ? i.getComputedStyle(e, null).getPropertyValue(t) : 0) : e.currentStyle && (t = t.replace(/\-(\w)/g, (function(e, t) {return t.toUpperCase()})), r = e.currentStyle[t], !1 === /^\d+(px)?$/i.test(r) && (r = function(t) {var r = e.style.left, i = e.runtimeStyle.left;return e.runtimeStyle.left = e.currentStyle.left, e.style.left = t || 0, t = e.style.pixelLeft + "px", e.style.left = r, e.runtimeStyle.left = i, t}(r))), r = null !== r ? r : 0, parseInt(r, 10)}, t.addSiteThemeDesign = function(e) {if (e && "string" == typeof e) {var t = document.getElementsByTagName("head")[0], r = document.createElement("link");t && (r.setAttribute("rel", "stylesheet"), r.setAttribute("type", "text/css"), r.setAttribute("href", e), t.appendChild(r))}}, t.Logger = e.Logger, t}(_core);var Sites = function(e) {"use strict";SitesSDK.Utils.Logger.setLogLevel(SitesSDK.Utils.Logger.LOG_LEVELS.LEVEL_WARN);var t = {}, r = {}, i = 0, o = function(t, o) {t && Sites.Events.hasOwnProperty(t) || e.notifySDKError("Event [" + t + "] is not supported."), o || e.notifySDKError("EVent callback handler is required."), r[t] = r[t] || [];var s = ++i;r[t].push({handler:o, id:s});var n = window.addEventListener ? "addEventListener" : "attachEvent";return (0, window[n])(t = "addEventListener" === n ? t : "on" + t, o, !1), s}, s = function(t, r) {var i = o(t, r);return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.addEventListener()", "SitesSDK.subscribe(messageType,callback,context)")), i};return t.addEventListener = s, t.removeEventListener = function(t, i) {t && Sites.Events.hasOwnProperty(t) || e.notifySDKError("Event [" + t + "] is not supported."), i || e.notifySDKError("EVent callback handler or id is required.");var o, s = -1, n = r[t];if (n) {for (o = 0;o < n.length;o++) if (n[o].handler === i || n[o].id === i) {s = o;break}} else console.log("Sites SDK Event registration for event %s not found ", t);if (s >= 0) {var a = i;"function" != typeof a && (a = n[o].handler), n.splice(o, 1), window.removeEventListener(t, a)} else console.log("Sites SDK Registration for event %s not found", t);SitesSDK.Utils.Logger.warn(e.getNotice("Sites.removeEventListener()", "SitesSDK.subscribe(messageType)"))}, t.setHeight = function(t) {if (t && "object" == typeof t)e.notifySDKError("Parameter height cannot be an object. Valid values are string or number");else {var r = window.top !== window ? window.parent : window.top, i = e.postBox.getProxy("component", r), o = "appHeight", s = "scsUpdateappHeight" + e.getQueryParameters(location.href).id;if (null == t)(t = {}).bodyOffsetHeight = function(e) {function t(e, t) {var r, i = (e.ownerDocument || document).defaultView;return i && i.getComputedStyle ? (t = t.replace(/([A-Z])/g, "-$1").toLowerCase(), r = null !== i.getComputedStyle(e, null).getPropertyValue(t) ? i.getComputedStyle(e, null).getPropertyValue(t) : 0) : e.currentStyle && (t = t.replace(/\-(\w)/g, (function(e, t) {return t.toUpperCase()})), r = e.currentStyle[t], !1 === /^\d+(px)?$/i.test(r) && (r = function(t) {var r = e.style.left, i = e.runtimeStyle.left;return e.runtimeStyle.left = e.currentStyle.left, e.style.left = t || 0, t = e.style.pixelLeft + "px", e.style.left = r, e.runtimeStyle.left = i, t}(r))), r = null !== r ? r : 0, parseInt(r, 10)} return e + t(window.document.body, "marginTop") + t(window.document.body, "marginBottom")}(window.document.body.offsetHeight), t.bodyScrollHeight = 0, t.bodyClientHeight = 0;else if ("string" == typeof t) {var n = parseInt(t, 10);if (isNaN(n)) return void e.notifySDKError("Value of parameter height " + t + " invalid");t = n + "px"} else {if (!e.isNumeric(t)) return void e.notifySDKError("Value of parameter height can be a string or a number");t += "px"}console.log("Sites SDK setHeight dispatching iframe height ", t), i.update({id:s, field:o, value:t}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.setHeight()", "SitesSDK.setProperty('height',args)"))}}, t.setWidth = function(t) {if (t) {var r = window.top !== window ? window.parent : window.top, i = e.postBox.getProxy("component", r), o = "appWidth", s = "scsUpdateappWidth" + e.getQueryParameters(location.href).id;if ("string" == typeof t) {var n = parseInt(t, 10);if (isNaN(n)) return void e.notifySDKError("Value of width " + t + " is invalid");t = n + "px"} else {if (!e.isNumeric(t)) return void e.notifySDKError("Value of width can only be a string or a number");t += "px"}console.log("Sites SDK setWidth dispatching iframe width %s ", t), i.update({id:s, field:o, value:t}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.setWidth()", "SitesSDK.setProperty('width',args)"))}}, t.triggerActions = function(t) {var r = window.top !== window ? window.parent : window.top, i = e.postBox.getProxy("component", r), o = "triggerActions", s = "scsUpdate" + o + e.getQueryParameters(location.href).id;i.update({id:s, field:o, value:{triggerName:t.triggerName, triggerPayload:t.triggerPayload, actions:t.actions}}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.triggerActions()", "SitesSDK.publish(messageType,payload)"))}, t}(_core);Sites.Events = {SETTINGS_UPDATED:"SETTINGS_UPDATED", EXECUTE_ACTION:"EXECUTE_ACTION", COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA", PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA", GET_ACTIONS:"GET_ACTIONS", GET_TRIGGERS:"GET_TRIGGERS"}, Sites.HOST_REPLYTO_MESSAGE_TYPES = {COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA", PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA", GET_APP_ACTIONS:"GET_APP_ACTIONS", GET_APP_TRIGGERS:"GET_APP_TRIGGERS"}, Sites.Properties = {CUSTOM_SETTINGS_DATA:"CUSTOM_SETTINGS_DATA"}, Sites.Settings = function(e) {"use strict";var t = {}, r = 1500, i = function() {var t = e.getQueryParameters(location.href).currCompId;return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getCurrCompId()", "SitesSDK.getProperty()")), t};return t.getCurrCompId = i, t.triggerSettingsUpdatedEvent = function(t, r) {var i = e.getTopWindow();e.postBox.getProxy("component", i).notify({id:r, data:t, type:Sites.Events.SETTINGS_UPDATED}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.triggerSettingsUpdatedEvent()", "SitesSDK.publish(messageType,payload)"))}, t.refreshApp = function(t) {var r = i(), o = e.getTopWindow();e.postBox.getProxy("component", o).refresh({id:r, data:t}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.refreshApp()", " SitesSDK.publish(messageType,payload)"))}, t.storeCustomSettingsData = function(t) {if (t) try {if (("string" != typeof t ? JSON.stringify(t) : t).length > r) return void e.notifySDKError("Sites SDK Error: Settings Storage is limited to " + r + " characters")} catch (r) {e.notifySDKError("Sites SDK Error: Parsing failed for params " + t + " Exception Stack" + JSON.stringify(r))} var i = t || {}, o = Sites.Utils.getCompId(), s = e.getTopWindow(), n = e.postBox.getProxy("component", s), a = "customSettingsData", g = "scsUpdatecustomSettingsData" + o;try {"string" == typeof t ? i = JSON.parse(t) : "object" == typeof t && (i = JSON.parse(JSON.stringify(t))), n.update({id:g, field:a, value:i})} catch (t) {e.notifySDKError("Sites SDK Error: Unable to save custom settings data " + JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.storeCustomSettingsData()", "SitesSDK.setProperty('customSettingsData',value)"))}, t.getCompSettingsId = function() {var t = e.getQueryParameters(window.location.href).settingsId || "";return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getCompSettingsId()", "SitesSDK.getProperty()")), t}, t.getOrigCompSettingsId = function() {var t = e.getQueryParameters(window.location.href).origSettingsId || "";return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getOrigCompSettingsId()", "SitesSDK.getProperty()")), t}, t.notifySiteOnSettingsUpdate = function() {var t = Sites.Utils.getCompId(), r = e.getTopWindow(), i = e.postBox.getProxy("component", r), o = "compSettingsId", s = "scsUpdatecompSettingsId" + t, n = Sites.Settings.getCompSettingsId();try {i.update({id:s, field:o, value:n})} catch (t) {e.notifySDKError("Sites SDK Error: Unable notify host site on update of settings data " + JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.notifySiteOnSettingsUpdate()", "SitesSDK.publish(messageType,payload) "))}, t.getProperty = function(t, r) {var i = e.getTopWindow(), o = e.postBox.getProxy("app", i), s = "$message", n = "scsRequest$message" + Sites.Utils.getCompId(), a = {}, g = e.generateUUID();if (t && "function" == typeof r && t && Sites.Properties.hasOwnProperty(t)) try {e.postBox.registerHandler("app", {hostresponse:function(e) {var t = e || {};t.hasOwnProperty("action") && t.hasOwnProperty("data") && "getProperty" === t.action && t.requestid === g && r(t.data || {})}}), a.action = "getProperty", a.actionArgs = {name:t}, a.requestid = g, a.location = "settings", o.hostrequest({id:n, field:s, value:a}), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getProperty()", "SitesSDK.getProperty()"))} catch (t) {e.notifySDKError("SDK: Sites.Settings.getProperty() : Unable to send host request" + JSON.stringify(t))}}, t}(_core), Sites.Rendering = function(e) {"use strict";var t = {};return t.getThemeDesign = function(t) {var r = e.getParentOrTopWindow(), i = e.postBox.getProxy("app", r), o = "message", s = "scsRequestmessage" + e.getQueryParameters(location.href).id, n = {}, a = e.generateUUID();if ("function" == typeof t) {try {e.postBox.registerHandler("app", {hostresponse:function(e) {var r = e || {};if (r.hasOwnProperty("action") && r.hasOwnProperty("data") && "getThemeDesign" === r.action && r.requestid === a) {var i = r.data || {};i.hasOwnProperty("url") && t({url:i.url})}}}), n.action = "getThemeDesign", n.requestid = a, i.hostrequest({id:s, field:o, value:n})} catch (t) {e.notifySDKError("Sites SDK Error: Unable to send host request" + JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Rendering.getThemeDesign()", "SitesSDK.getSiteProperty()"))}}, t.injectThemeDesign = function(t) {if (t && "string" == typeof t) {var r = document.getElementsByTagName("head")[0], i = document.createElement("link");r && (i.setAttribute("rel", "stylesheet"), i.setAttribute("type", "text/css"), i.setAttribute("href", t), r.appendChild(i)), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Rendering.injectThemeDesign()", "SitesSDK.Utils.addSiteThemeDesign(cssUrl)"))}}, t}(_core), Sites.Messaging = function(e) {"use strict";var t = {};return t.replyToHost = function(t, r, i) {t || e.notifySDKError("replyToHost: Parameter originMessageContext is missing. "), r || e.notifySDKError("replyToHost: Parameter replyToMessageType is missing"), r && Sites.HOST_REPLYTO_MESSAGE_TYPES.hasOwnProperty(r) || e.notifySDKError("replyTo: Message type [" + r + "] is not supported by host.");var o = {}, s = "", n = t.detail.targetOrigin;o.id = t.detail.source, o.action = t.detail.message.action || "", o.messageid = Math.random(), r === Sites.HOST_REPLYTO_MESSAGE_TYPES.GET_APP_ACTIONS ? (o.data = i || [], s = "appActions" + t.detail.source) : r === Sites.HOST_REPLYTO_MESSAGE_TYPES.GET_APP_TRIGGERS ? (o.data = i || [], s = "appTriggers") : r === Sites.HOST_REPLYTO_MESSAGE_TYPES.COPY_CUSTOM_DATA ? (o.data = i || [], s = "appCopyStyle") : r === Sites.HOST_REPLYTO_MESSAGE_TYPES.PASTE_CUSTOM_DATA ? (o.data = i || [], s = "appPasteStyle") : (o.data = {}, s = "appProcessingErrors" + t.detail.source), n.source.postMessage({destination:s, method:"receiveMessage", parameters:o}, n.origin), SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Messaging.replyToHost()", "SitesSDK.receiveMessage(type,callback,this)"))}, t}(_core), Sites.Utils = function(e) {"use strict";var t = {};return t.getCompId = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCompId()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).id}, t.getCacheBuster = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCacheBuster()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).cacheBuster}, t.getInstanceId = function() {var t, r = e.getQueryParameters(location.href).instance.split(".")[0] || {};try {r = e.base64Decode(r);var i = JSON.parse(r);t = i && i.hasOwnProperty("instanceid") ? i.instanceid : ""} catch (e) {t = ""} return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getInstanceId()", "SitesSDK.getProperty()")), t}, t.getInstance = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getInstance()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).instance}, t.getSignDate = function() {var t = "", r = e.getQueryParameters(location.href).instance.split(".")[0] || {};try {r = e.base64Decode(r);var i = JSON.parse(r);if (i && i.hasOwnProperty("signdate")) {var o = i.signdate;t = new Date(Number(o)).toDateString()}} catch (e) {t = ""} return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getSignDate()", "SitesSDK.getProperty()")), t}, t.getPermissions = function() {var t, r = e.getQueryParameters(location.href).instance.split(".")[0] || {};try {r = e.base64Decode(r);var i = JSON.parse(r);t = i && i.hasOwnProperty("permissions") ? i.permissions : ""} catch (e) {t = ""} return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getPermissions()", "SitesSDK.getProperty()")), t}, t.getViewMode = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getViewMode()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).viewMode}, t.getWidth = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getWidth()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).width}, t.getHeight = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getHeight()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).height}, t.getLocale = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getLocale()", "SitesSDK.getProperty()")), e.getQueryParameters(location.href).locale}, t.getCustomSettingsData = function() {var t, r = e.getQueryParameters(location.href).customSettingsData || "{}";try {t = JSON.parse(r)} catch (e) {t = {}} return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCustomSettingsData()", "SitesSDK.getProperty()")), t}, t.getCompSettingsId = function() {return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCompSettingsId()", "SitesSDK.getProperty()")), e.getQueryParameters(window.location.href).settingsId}, t}(_core);